<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Trắc nghiệm 100 Câu Hỏi Công Dân (USCIS 2008, bản tiếng Việt)</title>
<style>
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; line-height:1.6; margin:0; padding:0; background:#f7f7f9; }
  header { background:#0f172a; color:#fff; padding:24px; }
  main { max-width: 900px; margin: 0 auto; padding: 24px; }
  .card { background:#fff; border-radius: 16px; box-shadow: 0 10px 20px rgba(0,0,0,.06); padding: 20px; margin-bottom: 16px; }
  .q-title { font-weight: 700; margin-bottom: 8px; }
  .meta { color:#475569; font-size: 14px; margin-bottom: 20px; }
  .choices label { display:block; margin:8px 0; padding:10px 12px; border:1px solid #e2e8f0; border-radius:12px; cursor:pointer; }
  .choices input { margin-right: 8px; }
  .correct { border-color: #16a34a !important; background:#f0fdf4; }
  .wrong { border-color: #dc2626 !important; background:#fef2f2; }
  .footer { display:flex; gap: 12px; flex-wrap: wrap; margin-top: 16px; }
  button { border:0; border-radius: 12px; padding: 12px 16px; font-weight:600; cursor:pointer; }
  .primary { background:#2563eb; color:#fff; }
  .ghost { background:#e2e8f0; }
  .score { font-weight: 700; }
  .hidden { display:none; }
  .small { font-size: 13px; color:#64748b; }
</style>
</head>
<body>
<header>
  <h1 style="margin:0">Trắc nghiệm 100 Câu Hỏi Công Dân (USCIS 2008, bản tiếng Việt)</h1>
  <p class="small" style="margin-top:6px">Nguồn: USCIS – Bản tiếng Việt (phiên bản 2008). Bài làm gồm 100 câu hỏi trắc nghiệm, mỗi câu 4 đáp án.</p>
</header>
<main>
  <div class="card">
    <div class="meta">Mẹo: Bạn có thể làm ngẫu nhiên, chấm điểm tức thì, và xem đáp án đúng/sai sau khi nộp.</div>
    <div class="footer">
      <button class="primary" id="btn-shuffle">Xáo trộn câu hỏi</button>
      <button class="ghost" id="btn-clear">Xóa lựa chọn</button>
      <button class="ghost" id="btn-export">Tải kết quả (JSON)</button>
    </div>
  </div>
  <div id="quiz"></div>
  <div class="card">
    <div id="result" class="score">Điểm: 0 / 0</div>
    <div class="footer" style="margin-top:12px">
      <button class="primary" id="btn-submit">Nộp bài</button>
      <button class="ghost" id="btn-show-answers">Hiện đáp án đúng</button>
      <button class="ghost" id="btn-print">In / Lưu PDF</button>
    </div>
    <p class="small" style="margin-top:12px">*Một số câu có đáp án thay đổi theo thời gian (ví dụ: tên Tổng Thống/Phó Tổng Thống). Vui lòng cập nhật trước khi thi thật.</p>
  </div>
</main>
<script>
const DATA = {"title": "Trắc nghiệm 100 Câu Hỏi Công Dân (USCIS 2008, bản tiếng Việt) — Bản mẫu 20 câu đầu", "source": "USCIS bản tiếng Việt (2008)", "questions": [{"id": 1, "question": "Luật cao nhất của quốc gia là gì?", "choices": ["Mọi người đều phải tuân theo luật pháp.", "Tổng Thống", "kinh tế thị trường", "Hiến Pháp"], "answer_index": 3}, {"id": 2, "question": "Hiến Pháp có mục đích gì?", "choices": ["Nhà cầm quyền phải tuân theo luật pháp.", "một trăm (100)", "Tổng Thống", "thiết lập chánh phủ"], "answer_index": 3}, {"id": 3, "question": "Ý tưởng tự quản trị nằm trong ba chữ đầu tiên của Hiến Pháp. Các chữ này là những chữ nào?", "choices": ["Quốc Hội", "một sự thêm (vào Hiến Pháp)", "tuyên cáo nền độc lập của chúng ta (khỏi Anh Quốc)", "Chúng tôi người dân (We the People)"], "answer_index": 3}, {"id": 4, "question": "Tu chính án là gì?", "choices": ["Mọi người đều phải tuân theo luật pháp.", "thông báo nền độc lập của chúng ta (khỏi Anh Quốc)", "một sự thay đổi (trong Hiến Pháp)", "phân quyền"], "answer_index": 2}, {"id": 5, "question": "Ta gọi mười tu chính đầu tiên vào Hiến Pháp là gì?", "choices": ["tự do thỉnh nguyện chánh phủ", "Luật Dân Quyền", "Ngành Lập Pháp (của Liên Bang hay Quốc Gia)", "quyền tự do"], "answer_index": 1}, {"id": 6, "question": "Kể ra một quyền hoặc một tự do trong Tu Chính Án Đầu Tiên (First Amendment)?", "choices": ["tự do ngôn luận", "tuyên cáo nền độc lập của chúng ta (khỏi Anh Quốc)", "kinh tế tư bản", "Không ai được ở trên pháp luật cả."], "answer_index": 0}, {"id": 7, "question": "Hiến Pháp có bao nhiêu tu chính án?", "choices": ["tự do hội họp", "Hiến Pháp", "tự do báo chí", "hai mươi bảy (27)"], "answer_index": 3}, {"id": 8, "question": "Bản Tuyên Ngôn Độc Lập có ý nghĩa gì?", "choices": ["Bạn có thể theo bất cứ tôn giáo nào, hoặc không theo tôn giáo nào.", "Thượng và Hạ Nghị Viện", "thông báo nền độc lập của chúng ta (khỏi Anh Quốc)", "Không ai được ở trên pháp luật cả."], "answer_index": 2}, {"id": 9, "question": "Kể ra hai quyền trong Bản Tuyên Ngôn Độc Lập?", "choices": ["quyền sống", "thiết lập chánh phủ", "tự do báo chí", "Hiến Pháp"], "answer_index": 0}, {"id": 10, "question": "Tự do tôn giáo là gì?", "choices": ["bảo vệ các quyền căn bản của người dân Hoa Kỳ", "Quốc Hội", "Không ai được ở trên pháp luật cả.", "Bạn có thể theo bất cứ tôn giáo nào, hoặc không theo tôn giáo nào."], "answer_index": 3}, {"id": 11, "question": "Hệ thống kinh tế của Hoa Kỳ gọi là gì?", "choices": ["hành pháp", "kinh tế tư bản", "quyền sống", "phân quyền"], "answer_index": 1}, {"id": 12, "question": "“Thượng tôn luật pháp” là gì?", "choices": ["Mọi người đều phải tuân theo luật pháp.", "sáu (6)", "một trăm (100)", "một sự thay đổi (trong Hiến Pháp)"], "answer_index": 0}, {"id": 13, "question": "Cho biết một ngành hay phần của công quyền.", "choices": ["tự do thỉnh nguyện chánh phủ", "lập pháp", "Quốc Hội", "kinh tế thị trường"], "answer_index": 2}, {"id": 14, "question": "Cách nào ngăn cản một ngành công quyền trở thành quá mạnh?", "choices": ["kiểm soát lẫn nhau", "hành pháp", "Mọi người đều phải tuân theo luật pháp.", "quyền theo đuổi hạnh phúc"], "answer_index": 0}, {"id": 15, "question": "Ai phụ trách hành pháp?", "choices": ["tự do ngôn luận", "tự do thỉnh nguyện chánh phủ", "Tổng Thống", "Hiến Pháp"], "answer_index": 2}, {"id": 16, "question": "Ai làm luật liên bang?", "choices": ["Cả các người lãnh đạo đều phải tuân theo luật pháp.", "một trăm (100)", "Quốc Hội", "Luật Dân Quyền"], "answer_index": 2}, {"id": 17, "question": "Hai phần của Quốc Hội Hoa Kỳ là gì?", "choices": ["bảo vệ các quyền căn bản của người dân Hoa Kỳ", "Quốc Hội", "một sự thêm (vào Hiến Pháp)", "Thượng và Hạ Nghị Viện"], "answer_index": 3}, {"id": 18, "question": "Có bao nhiêu Thượng Nghị Sĩ Liên Bang?", "choices": ["Luật Dân Quyền", "một sự thay đổi (trong Hiến Pháp)", "một trăm (100)", "cho biết Hoa Kỳ đã tự do (khỏi Anh Quốc)"], "answer_index": 2}, {"id": 19, "question": "Chúng ta bầu Thượng Nghị Sĩ cho bao nhiêu năm?", "choices": ["lập pháp", "sáu (6)", "một trăm (100)", "Cả các người lãnh đạo đều phải tuân theo luật pháp."], "answer_index": 1}, {"id": 20, "question": "Ai là một trong những Thượng Nghị Sĩ Liên Bang của bạn?", "choices": ["thiết lập chánh phủ", "kinh tế tư bản", "Tổng Thống", "Câu trả lời thay đổi tùy tiểu bang."], "answer_index": 3}]};
function el(tag, attrs={}, children=[]) {
  const e = document.createElement(tag);
  for (const [k,v] of Object.entries(attrs)) {
    if (k === "class") e.className = v;
    else if (k === "html") e.innerHTML = v;
    else e.setAttribute(k, v);
  }
  for (const c of [].concat(children)) e.appendChild(c);
  return e;
}

let state = {
  order: DATA.questions.map((q, i)=>i),
  answers: Array(DATA.questions.length).fill(null),
  submitted: false,
};

function render() {
  const root = document.getElementById("quiz");
  root.innerHTML = "";
  state.order.forEach((idx, i)=>{
    const q = DATA.questions[idx];
    const card = el("div", {class:"card"});
    const title = el("div", {class:"q-title", html: (i+1)+". "+q.question});
    card.appendChild(title);
    const choices = el("div", {class:"choices"});
    q.choices.forEach((ch, j)=>{
      const id = `q${idx}_${j}`;
      const lbl = el("label");
      const inp = el("input", {type:"radio", name:`q_${idx}`, id});
      if (state.answers[idx] === j) inp.checked = true;
      inp.addEventListener("change", ()=>{ state.answers[idx] = j; updateScore(); });
      lbl.appendChild(inp);
      lbl.appendChild(el("span", {html: ch}));
      if (state.submitted) {
        const isCorrect = j === q.answer_index;
        const isSelected = state.answers[idx] === j;
        if (isCorrect) lbl.classList.add("correct");
        if (isSelected && !isCorrect) lbl.classList.add("wrong");
      }
      choices.appendChild(lbl);
    });
    card.appendChild(choices);
    root.appendChild(card);
  });
  updateScore();
}

function updateScore() {
  const result = document.getElementById("result");
  let total = DATA.questions.length;
  let correct = 0;
  for (let i=0;i<DATA.questions.length;i++) {
    const ans = state.answers[i];
    if (ans === DATA.questions[i].answer_index) correct++;
  }
  if (!state.submitted) {
    const done = state.answers.filter(a=>a!==null).length;
    result.textContent = `Đã chọn: ${done} / ${total} — Điểm (tạm tính nếu nộp ngay): ${correct} / ${total}`;
  } else {
    result.textContent = `Điểm: ${correct} / ${total}`;
  }
}

document.getElementById("btn-submit").addEventListener("click", ()=>{
  state.submitted = true;
  render();
});

document.getElementById("btn-show-answers").addEventListener("click", ()=>{
  state.submitted = true;
  render();
});

document.getElementById("btn-shuffle").addEventListener("click", ()=>{
  // shuffle order and re-render
  for (let i = state.order.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [state.order[i], state.order[j]] = [state.order[j], state.order[i]];
  }
  render();
});

document.getElementById("btn-clear").addEventListener("click", ()=>{
  state.answers = Array(DATA.questions.length).fill(null);
  state.submitted = false;
  render();
});

document.getElementById("btn-print").addEventListener("click", ()=>{
  window.print();
});

document.getElementById("btn-export").addEventListener("click", ()=>{
  const results = DATA.questions.map((q, i)=>({
    id: q.id,
    question: q.question,
    chosen: state.answers[i],
    correct: q.answer_index
  }));
  const blob = new Blob([JSON.stringify(results, null, 2)], {type: "application/json"});
  const url = URL.createObjectURL(blob);
  const a = el("a", {href: url, download: "ket_qua_trac_nghiem.json"});
  document.body.appendChild(a);
  a.click();
  setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); }, 1000);
});

render();
</script>
</body>
</html>
